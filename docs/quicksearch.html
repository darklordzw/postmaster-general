<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Modules Classes Consumer PostmasterGeneral Events replyError ACK error event. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. correlationId string The correlation id of the message. replyTo string The return address of the message. err string The error message. ackError Fired when there is an error acknowledging a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. connect Fired when the consumer has closed it's connection to RabbitMQ. connect Fired when the consumer has finished connecting to RabbitMQ. error Fired when the consumer is unable to establish a connection to RabbitMQ. Type: object Properties: Name Type Description err error The error. name string The name of the channel. handlerError Fired when there is an error handling a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. nackError Fired when there is an error NACK-ing a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. rejectError Fired when there is an error rejecting a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. sendReply Fired when a consumer has a reply to send for a message. Type: object Properties: Name Type Description topic string The message's routing key. msg object The RabbitMQ message. reply object The reply data. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Classes Classes Consumer PostmasterGeneral Events replyError ACK error event. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. correlationId string The correlation id of the message. replyTo string The return address of the message. err string The error message. ackError Fired when there is an error acknowledging a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. connect Fired when the consumer has closed it's connection to RabbitMQ. connect Fired when the consumer has finished connecting to RabbitMQ. error Fired when the consumer is unable to establish a connection to RabbitMQ. Type: object Properties: Name Type Description err error The error. name string The name of the channel. handlerError Fired when there is an error handling a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. nackError Fired when there is an error NACK-ing a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. rejectError Fired when there is an error rejecting a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. sendReply Fired when a consumer has a reply to send for a message. Type: object Properties: Name Type Description topic string The message's routing key. msg object The RabbitMQ message. reply object The reply data. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply # postmaster-general Dead-simple, ready-to-use, promise-based Node.js library for microservice communication over AMQP using amqplib. Featurespostmaster-general strives to be unopinionated, serving as a thin wrapper around amqplib that sets some sensible defaults and encourages best-practices, including: Dedicated channels for publishing, consuming, and asserting topology. Single-purpose listener queues, no mixing messages. Built-in RPC support. Automatic reconnect on connection failure and channel error. InstallNote: This library makes heavy use of the async/await keywords, and requires Node.js 7+. npm install --save postmaster-generalUsageThe following snippet showcases basic usage. const PostmasterGeneral = require('postmaster-general'); const postmaster = new PostmasterGeneral({ logLevel: 'debug' }); const printGreeting = async (message) =&gt; { console.log('[action:get_greeting] received'); return { greeting: 'Hello, ' + message.name }; }; // Start the Postmaster instance. postmaster.connect() .then(() =&gt; postmaster.addRabbitMQListener('action:get_greeting', printGreeting)) // Add a listener callback. .then(() =&gt; postmaster.startConsuming()) // Publish a fire-and-forget message. .then(() =&gt; postmaster.publish('action:get_greeting', { name: 'Bob' })) // Publish a message with a callback. .then(() =&gt; postmaster.request('action:get_greeting', { name: 'Steve' })) // Handle the callback. .then((res) =&gt; { console.log(res.greeting); }) // Shut everything down. .then(() =&gt; postmaster.shutdown()) .catch((err) =&gt; { console.log(err.message); }) .then(() =&gt; { process.exit(); });OptionsThe following options may be overridden in the constructor: { &quot;connectRetryDelay&quot;: 1000, &quot;connectRetryLimit&quot;: 3, &quot;deadLetterExchange&quot;: &quot;postmaster.dlx&quot;, &quot;handlerTimingResetInterval&quot;: 30000, &quot;heartbeat&quot;: 30, &quot;logLevel&quot;: &quot;warn&quot;, &quot;pm2&quot;: false, &quot;pm2InstanceVar&quot;: &quot;NODE_APP_INSTANCE&quot;, &quot;publishRetryDelay&quot;: 1000, &quot;publishRetryLimit&quot;: 3, &quot;queuePrefix&quot;: &quot;postmaster.queue&quot;, &quot;removeListenerRetryDelay&quot;: 1000, &quot;removeListenerRetryLimit&quot;: 3, &quot;shutdownTimeout&quot;: 30000, &quot;url&quot;: &quot;amqp://guest:guest@localhost:5672&quot; }LicenseLicensed under the MIT license. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"module-lib_consumer.html":{"id":"module-lib_consumer.html","title":"Module: lib/consumer","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Module: lib/consumer Defines the &quot;Consumer&quot; class, representing RabbitMQ consumers. Classes Consumer × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"module-lib_consumer-Consumer.html":{"id":"module-lib_consumer-Consumer.html","title":"Class: Consumer","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Class: Consumer lib/consumer~ Consumer Class representing a RabbitMQ consumer. new Consumer(connection, topic, callback, options) Constructs a Consumer. Parameters: Name Type Description connection object The amqp-connection-manager connection object. topic string The topic to consume. callback function The callback to call when a message is processed. options object Queue, exchange, and binding options. Methods ack(msg) Called to acknowledge a message. Parameters: Name Type Description msg object The RabbitMQ message to acknowledge. Fires: module:lib/consumer~Consumer#event:ackError close() Closes the underlying channel. Returns: Type promise &lt;async&gt; handleMessage(msg) Called to handle a consumed message. Parameters: Name Type Description msg object The RabbitMQ message data. Fires: module:lib/consumer~Consumer#event:sendReply module:lib/consumer~Consumer#event:handlerError Returns: Type promise nack(msg) Called to nack a message without requeuing. Parameters: Name Type Description msg object The RabbitMQ message to acknowledge. Fires: module:lib/consumer~Consumer#event:nackError reject(msg) Called to reject a message, sending back to the queue for processing by another consumer. Parameters: Name Type Description msg object The RabbitMQ message to acknowledge. Fires: module:lib/consumer~Consumer#event:rejectError resetHandlerTimings() Resets the handler timings to prevent unbounded accumulation of stale data. setHandlerTiming(start) Updates the timing data for message handler callbacks. Parameters: Name Type Description start number The time at which the handler started execution. startConsuming() Called to start consuming from the queue. Returns: Type promise &lt;async&gt; stopConsuming() Called to stop consuming from the queue. Returns: Type promise Events ackError Fired when there is an error acknowledging a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. connect Fired when the consumer has closed it's connection to RabbitMQ. connect Fired when the consumer has finished connecting to RabbitMQ. error Fired when the consumer is unable to establish a connection to RabbitMQ. Type: object Properties: Name Type Description err error The error. name string The name of the channel. handlerError Fired when there is an error handling a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. nackError Fired when there is an error NACK-ing a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error. rejectError Fired when there is an error rejecting a message. Type: object Properties: Name Type Description topic string The message's routing key. messageId string The unique id of the message. err error The error message. sendReply Fired when a consumer has a reply to send for a message. Type: object Properties: Name Type Description topic string The message's routing key. msg object The RabbitMQ message. reply object The reply data. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"module-lib_postmaster-general.html":{"id":"module-lib_postmaster-general.html","title":"Module: lib/postmaster-general","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Module: lib/postmaster-general A simple library for making microservice message bus calls using RabbitMQ via amqplib. https://www.npmjs.com/package/amqplib Classes PostmasterGeneral × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "},"module-lib_postmaster-general-PostmasterGeneral.html":{"id":"module-lib_postmaster-general-PostmasterGeneral.html","title":"Class: PostmasterGeneral","body":" Documentation Modules lib/consumerlib/postmaster-general Classes lib/consumer~Consumerlib/postmaster-general~PostmasterGeneral Events Consumer#event:replyErrorlib/consumer~Consumer#event:ackErrorlib/consumer~Consumer#event:connectlib/consumer~Consumer#event:errorlib/consumer~Consumer#event:handlerErrorlib/consumer~Consumer#event:nackErrorlib/consumer~Consumer#event:rejectErrorlib/consumer~Consumer#event:sendReply Class: PostmasterGeneral lib/postmaster-general~ PostmasterGeneral new PostmasterGeneral( [options]) Constructor function for the PostmasterGeneral object. Parameters: Name Type Argument Description options object &lt;optional&gt; Members handlerTimings Accessor property for getting the current handler timings. outstandingMessageCount Accessor property for retrieving the number of messages being handled, subscribed and replies. Methods _handleReply(msg) Called to handle a reply to an RPC-style message. Parameters: Name Type Description msg Object The RabbitMQ message. _resolveTopic(pattern) Called to resolve the RabbitMQ topic key corresponding to an address. Parameters: Name Type Description pattern String connect() Called to connect to RabbitMQ and build default channels. &lt;async&gt; publish(routingKey [, message] [, options]) Publishes a fire-and-forget message that doesn't wait for an explicit response. Parameters: Name Type Argument Description routingKey String The routing key to attach to the message. message Object &lt;optional&gt; The message data to publish. options Object &lt;optional&gt; Optional publishing options. Returns: A promise that resolves when the message is published or publishing has failed. Type Promise &lt;async&gt; removeRabbitMQListener(pattern [, exchange] [, prefix]) Called to remove a listener. Note that this call DOES NOT delete any queues or exchanges. It is recommended that these constructs be made to auto-delete or expire if they are not intended to be persistent. Parameters: Name Type Argument Description pattern String The pattern to match. exchange String &lt;optional&gt; The name of the exchange to remove the binding. prefix String &lt;optional&gt; The queue prefix to match. Returns: Promise that resolves when the listener has been removed. Type Promise &lt;async&gt; reply(msg) Called to send a reply to a message. Parameters: Name Type Description msg object The RabbitMQ message to acknowledge. Fires: Consumer#event:replyError Returns: Type promise &lt;async&gt; request(routingKey [, message] [, options]) Publishes an RPC-style message that waits for a response. Parameters: Name Type Argument Description routingKey String The routing key to attach to the message. message Object &lt;optional&gt; The message data to publish. options Object &lt;optional&gt; Optional publishing options. Returns: A promise that resolves when the message is successfully published and a reply is received. Type Promise &lt;async&gt; shutdown() Called to gracefully shutdown the RabbitMQ connection while allowing outstanding messages to process. startConsuming() Called to start consuming incoming messages from all consumer channels. Returns: Promise that resolves when all consumers have begun consuming. Type Promise &lt;async&gt; stopConsuming( [awaitReplies]) Called to stop consuming incoming messages from all channels. Parameters: Name Type Argument Description awaitReplies Boolean &lt;optional&gt; If truthy, this function will skip cancelling the reply consumer. Returns: Promise that resolves when all consumers have stopped consuming. Type Promise × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-01-08T12:37:04-05:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
